
<%= render partial: 'items/header' %>
 <div class="bg_pattern Cross"></div>
  <h2></h2>
   <div class="bg_pattern Cross"></div>
    <div class="reviewform">    
     <div class="reviewbox rounded-3 border">
      <h2>🍊レビュー編集フォーム🍊</h2>
       <div class="col-md-6">
       </div>
      <% if user_signed_in? %>
       <%= form_with(model: [@item, @review], local: true) do |f| %>
        <div class="field">
         <%= f.label :comment, " レビューコメント" %><br/>
         <%= f.text_area :comment,  rows: 4, cols: 60, class: "m-form-text", placeholder: "ご自由に記載ください", id:"comment_content" %><br/>


<div class="table-size2">
    <table class="table table-warning table-hover table-bordered">
        <tbody>
         <tr> 
            <th class="table__col2">総合評価：不味い〜美味しい</th>
            <td class="table__col2"><div class="detail-value", id="edit-rate-<%= @review.id %>"></div></td>
        </tr>
          <tr>
          <tr>
            <th class="table__col2">甘味評価：甘い〜とても甘い</th>
            <td class="table__col2"><div class="detail-value", id="edit-rate1-<%= @review.id %>"></div></td>
          </tr>
          <tr>   
            <th class="table__col2">酸味評価：酸っぱい〜とても酸っぱい</th>
            <td class="table__col2"><div class="detail-value", id="edit-rate2-<%= @review.id %>"></div></td>
          </tr>
          <tr>
            <th class="table__col2">水分評価：水分が少ない〜多い</th>
            <td class="table__col2"><div class="detail-value", id="edit-rate3-<%= @review.id %>"></div></td>
          </tr>
          <tr>
            <th class="table__col2">食べやすさ評価：食べにくい〜食べやすい</th>
            <td class="table__col2"><div class="detail-value", id="edit-rate4-<%= @review.id %>"></div></td>
          </tr>
        </tbody>
      </table>
</div>

    <div class="actions"><br/>

<%= f.submit "編集する", class: 'back-btn-update' %>

<% end %>

<%= render partial: "items/form_rate", locals: { item: @item } %>

<% end %>

    </div>
   </div>
  </div>
 </div>


<%# 再評価スクリプト %>
 <script>
  $('#edit-rate-<%= @review.id %>').raty({
    size: 36,
    starOff:  '<%= asset_path('star-off.png') %>',
    starOn : '<%= asset_path('star-on.png') %>',
    starHalf: '<%= asset_path('star-half.png') %>',
    half: true,
    score: <%= @review.all_rating %>,     //scoreオプションで最初の評価内容を取得
    scoreName: 'review[all_rating]',      //scoreNameオプションで、新たに評価を保存
  });
</script>

 <script>
  $('#edit-rate1-<%= @review.id %>').raty({
    size: 36,
    starOff:  '<%= asset_path('star-off.png') %>',
    starOn : '<%= asset_path('star-on.png') %>',
    starHalf: '<%= asset_path('star-half.png') %>',
    half: true,
    score: <%= @review.rating1 %>,     //scoreオプションで最初の評価内容を取得
    scoreName: 'review[rating1]',      //scoreNameオプションで、新たに評価を保存
  });
</script>

 <script>
  $('#edit-rate2-<%= @review.id %>').raty({
    size: 36,
    starOff:  '<%= asset_path('star-off.png') %>',
    starOn : '<%= asset_path('star-on.png') %>',
    starHalf: '<%= asset_path('star-half.png') %>',
    half: true,
    score: <%= @review.rating2 %>,     //scoreオプションで最初の評価内容を取得
    scoreName: 'review[rating2]',      //scoreNameオプションで、新たに評価を保存
  });
</script>

 <script>
  $('#edit-rate3-<%= @review.id %>').raty({
    size: 36,
    starOff:  '<%= asset_path('star-off.png') %>',
    starOn : '<%= asset_path('star-on.png') %>',
    starHalf: '<%= asset_path('star-half.png') %>',
    half: true,
    score: <%= @review.rating3 %>,     //scoreオプションで最初の評価内容を取得
    scoreName: 'review[rating3]',      //scoreNameオプションで、新たに評価を保存
  });
</script>

 <script>
  $('#edit-rate4-<%= @review.id %>').raty({
    size: 36,
    starOff:  '<%= asset_path('star-off.png') %>',
    starOn : '<%= asset_path('star-on.png') %>',
    starHalf: '<%= asset_path('star-half.png') %>',
    half: true,
    score: <%= @review.rating4 %>,     //scoreオプションで最初の評価内容を取得
    scoreName: 'review[rating4]',      //scoreNameオプションで、新たに評価を保存
  });
</script>